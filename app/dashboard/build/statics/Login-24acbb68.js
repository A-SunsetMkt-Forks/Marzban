import{g as i,A as p,ba as y,E as b,bb as S,k as e,al as a,w as r,I as x,x as g,P as L,ay as A,az as v,aA as I,_ as E}from"./vendor-4e2f01c0.js";import{z as l,a0 as M,c as R,l as V,I as h,$ as Z,s as B}from"./Input-88b4794c.js";import{B as T,C as W,D as _}from"./index-f0f2cf78.js";const z=o=>i.createElement("svg",{viewBox:"0 0 747 747",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},i.createElement("path",{d:"M746.671 209.652V77.6572C746.671 72.9384 743.827 68.6832 739.468 66.8811C735.108 65.0738 730.093 66.0739 726.754 69.4072L579.354 216.807C577.453 202.386 570.203 189.203 559.037 179.87C547.875 170.542 533.615 165.744 519.083 166.432C504.551 167.12 490.807 173.24 480.573 183.583L414.375 249.776C412.417 235.391 405.141 222.25 393.985 212.959C382.823 203.662 368.594 198.88 354.083 199.552C339.578 200.224 325.849 206.302 315.594 216.588L274.343 257.828L19.9167 3.41515C16.5781 0.0818157 11.5625 -0.918184 7.20306 0.889149C2.84373 2.69648 0 6.94648 0 11.6651V143.649C0 146.743 1.22917 149.712 3.41667 151.899L191.843 340.339L3.41667 528.753C1.2292 530.94 0 533.909 0 537.003V668.997C0 673.716 2.84373 677.971 7.20306 679.773C11.5624 681.581 16.578 680.58 19.9167 677.247L167.317 529.847C169.285 544.233 176.561 557.358 187.718 566.65C198.869 575.947 213.098 580.728 227.603 580.066C242.103 579.404 255.838 573.342 266.098 563.071L332.295 496.874V496.879C334.259 511.264 341.535 524.395 352.691 533.686C363.853 542.977 378.082 547.759 392.587 547.092C407.093 546.421 420.822 540.348 431.077 530.066L472.327 488.826L726.754 743.239C728.941 745.427 731.91 746.656 735.004 746.656C736.535 746.661 738.056 746.359 739.473 745.77C743.832 743.963 746.671 739.708 746.671 734.989V602.994C746.671 599.901 745.442 596.932 743.254 594.744L554.827 406.318L743.254 217.904H743.259C745.447 215.717 746.676 212.748 746.676 209.654L746.671 209.652ZM23.3373 39.8118L257.844 274.318L208.328 323.818L23.3413 138.818L23.3373 39.8118ZM723.337 706.825L488.831 472.318L538.347 422.818L723.333 607.818L723.337 706.825ZM23.3373 541.825L332.097 233.078C338.764 226.719 347.624 223.172 356.843 223.172C366.056 223.172 374.916 226.719 381.588 233.078C388.151 239.641 391.838 248.548 391.838 257.828C391.838 267.114 388.151 276.016 381.588 282.577L23.3347 640.831L23.3373 541.825ZM249.604 546.575C240.755 555.419 227.864 558.872 215.781 555.638C203.703 552.398 194.265 542.961 191.027 530.883C187.792 518.8 191.245 505.91 200.089 497.06L497.076 200.074C505.92 191.23 518.811 187.772 530.893 191.011C542.971 194.246 552.409 203.678 555.648 215.76C558.888 227.839 555.434 240.73 546.591 249.572L249.604 546.575ZM723.337 204.815L414.577 513.562C407.911 519.926 399.051 523.473 389.832 523.473C380.618 523.473 371.753 519.926 365.087 513.562C358.529 506.999 354.842 498.098 354.842 488.816C354.842 479.535 358.529 470.634 365.087 464.071L723.34 105.818L723.337 204.815Z",fill:"currentColor"})),F=l.object({username:l.string().min(1,"login.fieldRequired"),password:l.string().min(1,"login.fieldRequired")}),H=p(z,{baseStyle:{strokeWidth:"10px",w:12,h:12}}),q=p(M,{baseStyle:{w:5,h:5,strokeWidth:"2px"}}),O=()=>{var m,C,d;const o=y(),{t:s}=b();let f=S();const{register:c,formState:{errors:t},handleSubmit:j}=R({resolver:B(F)});i.useEffect(()=>{T(),f.pathname!=="/login"&&o("/login",{replace:!0})},[]);const{mutate:w,isLoading:k,error:u}=W({mutation:{onSuccess({access_token:n}){_(n),o("/")}}});return e.jsxs(a,{justifyContent:"space-between",minH:"100vh",p:"6",w:"full",children:[e.jsxs(r,{w:"full",children:[e.jsx(x,{justifyContent:"end",w:"full",children:e.jsx(V,{})}),e.jsx(x,{w:"full",justifyContent:"center",alignItems:"center",children:e.jsxs(r,{w:"full",maxW:"340px",mt:"6",children:[e.jsxs(a,{alignItems:"center",w:"full",children:[e.jsx(H,{}),e.jsx(g,{fontSize:"2xl",fontWeight:"semibold",children:s("login.loginYourAccount")}),e.jsx(g,{color:"gray.600",_dark:{color:"gray.400"},children:s("login.welcomeBack")})]}),e.jsx(r,{w:"full",maxW:"300px",m:"auto",pt:"4",children:e.jsx("form",{onSubmit:j(n=>{w({data:{...n,grant_type:"password"}})}),children:e.jsxs(a,{mt:4,rowGap:2,children:[e.jsx(L,{children:e.jsx(h,{w:"full",placeholder:s("username"),...c("username"),error:s((m=t==null?void 0:t.username)==null?void 0:m.message)})}),e.jsx(L,{children:e.jsx(h,{w:"full",type:"password",placeholder:s("password"),...c("password"),error:s((C=t==null?void 0:t.password)==null?void 0:C.message),autoComplete:""})}),u&&e.jsxs(A,{status:"error",rounded:"md",children:[e.jsx(v,{}),e.jsx(I,{children:(d=u.data)==null?void 0:d.detail})]}),e.jsxs(E,{isLoading:k,type:"submit",w:"full",colorScheme:"primary",children:[e.jsx(q,{marginRight:1}),s("login")]})]})})})]})})]}),e.jsx(Z,{})]})};export{O as Login,H as LogoIcon,O as default};
